<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ZCASH: TERMINAL</title>
<style>
body {
  background: #000;
  color: #fff;
  font-family: "Lucida Console", Monaco, monospace;
  font-size: 15px;
  line-height: 1.2;  
  margin: 0;
  padding: 20px;
}

.terminal {
  max-width: 80ch;
  width: 100%;
  margin: 0;
}

.ascii-art {
  color: #DD9D34;
  font-size: 12px;
  line-height: 1.1;  
  margin: 5px 0 5px 0; 
  white-space: pre;
}

.header-gold {
  color: #DD9D34;
  font-size: 23px;  
  letter-spacing: 2px;
  margin: 5px 0 2px 0;
}

.subheader {
  color: #DD9D34;
  font-size: 15px;  
  margin: 15px 0 5px 0;
  text-transform: uppercase;
}

.row {
  display: flex;
  justify-content: space-between;
  margin: 1px 0;  
  max-width: 80ch;
  line-height: 1.2;
}

.label {
  color: #bbb;
  width: 18ch;
}

.value {
  color: #fff;
}

.positive { color: #198652; }
.negative { color: #9B1C2E; }

.footer {
  margin-top: 55px;
  padding-top: 5px;
  color: #fff;
  font-size: 15px;
  line-height: 1.2;
}

a, a:visited, a:hover, a:active {
  color: #DD9D34;
  text-decoration: none;
}
a:hover {
  text-decoration: underline;
}

.blink {
  animation: blink 1s step-end infinite;
}

@keyframes blink {
  from, to { opacity: 1; }
  50% { opacity: 0; }
}

.version {
  color: #777;
  font-size: 15px;
  margin-top: 0px;
  margin-bottom: 5px;
  line-height: 1.2;
}

.grid-2 {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 15px;
  margin: 10px 0 5px 0;  
  max-width: 80ch;
}

@media (max-width: 600px) {
  .grid-2 {
    grid-template-columns: 1fr;
    gap: 15px;
  }
}

.data-block {
  margin: 5px 0;  
}

.small {
  color: #777;
  font-size: 15px;
  margin-top: 2px;
  line-height: 1.2;
}

.link-block {
  margin: 0px 0;  
  line-height: 1.2;
}

.link-label {
  color: #999;
  font-size: 15px;
  margin-bottom: 0px;
  margin-top: 20px;
  line-height: 1.2;
}
</style>
</head>
<body>

<div class="terminal">

<!-- ASCII ART con color Zcash -->
<div class="ascii-art">
  ███████╗ ██████╗ █████╗ ███████╗██╗  ██╗    ███╗   ██╗ ██████╗ ██████╗ ███████╗
  ╚══███╔╝██╔════╝██╔══██╗██╔════╝██║  ██║    ████╗  ██║██╔═══██╗██╔══██╗██╔════╝
    ███╔╝ ██║     ███████║███████╗███████║    ██╔██╗ ██║██║   ██║██║  ██║█████╗  
   ███╔╝  ██║     ██╔══██║╚════██║██╔══██║    ██║╚██╗██║██║   ██║██║  ██║██╔══╝  
  ███████╗╚██████╗██║  ██║███████║██║  ██║    ██║ ╚████║╚██████╔╝██████╔╝███████╗
  ╚══════╝ ╚═════╝╚═╝  ╚═╝╚══════╝╚═╝  ╚═╝    ╚═╝  ╚═══╝ ╚═════╝ ╚═════╝ ╚══════╝
</div>
<div class="header-gold">TERMINAL NODE MONITOR</div>
<div class="version">[SISTEMA]: NODO PROPIO · ACTUALIZACION CADA 60s · <span class="blink">▶</span> ONLINE</div>

<!-- NODO STATUS -->
<div class="subheader">ZCASH NODE · STATUS</div>
<div id="node-status" class="data-block">
  <div class="row"><span class="label">VERSION</span><span class="value" id="node-version">lightwalletd v0.4.18</span></div>
  <div class="row"><span class="label">ESTADO</span><span class="value positive" id="node-state">SYNCED</span></div>
  <div class="row"><span class="label">BLOQUES</span><span class="value" id="node-blocks">3,251,436</span></div>
  <div class="row"><span class="label">CONEXIONES</span><span class="value" id="node-connections">8 (3 IN · 5 OUT)</span></div>
  <div class="row"><span class="label">MEMPOOL</span><span class="value" id="node-mempool">0 TX</span></div>
  <div class="row"><span class="label">UPTIME</span><span class="value" id="node-uptime">47d 5h 0min</span></div>
</div>

<!-- NODO NETWORK -->
<div class="subheader">ZCASH NODE · NETWORK</div>
<div id="node-network" class="data-block">
  <div class="row"><span class="label">DIFICULTAD</span><span class="value" id="node-difficulty">128,282,526.03</span></div>
  <div class="row"><span class="label">RECOMPENSA</span><span class="value" id="node-hashrate">3.125 ZEC</span></div>
  <div class="row"><span class="label">CHAIN</span><span class="value" id="node-chain">main</span></div>
  <div class="row"><span class="label">BEST BLOCK</span><span class="value" id="node-bestblock">0000000000e0b0fc...a40</span></div>
  <div class="row"><span class="label">SAPLING</span><span class="value" id="node-timestamp">bloque 419200</span></div>
</div>

<!-- MARKET DATA -->
<div class="subheader">ZCASH MARKET DATA</div>
<div id="market-content" class="data-block">
  <div class="row"><span class="label">PRECIO USD</span><span class="value">$35.75</span></div>
  <div class="row"><span class="label">24h %</span><span class="value negative">-2.14%</span></div>
  <div class="row"><span class="label">7d %</span><span class="value negative">-5.82%</span></div>
  <div class="row"><span class="label">MARKET CAP</span><span class="value">$625.00M</span></div>
  <div class="row"><span class="label">VOLUMEN 24h</span><span class="value">$42.30M</span></div>
</div>
<div class="small" id="market-updated">actualizado: 10:46:37 UTC</div>

<!-- CONECTAR WALLET -->
<div class="subheader">CONECTAR WALLET</div>
<div id="wallet-connect" class="data-block">
  <div class="row"><span class="label">SERVER</span><span class="value">carover0.xyz:9067</span></div>
  <div class="row"><span class="label">TLS</span><span class="value positive">HABILITADO</span></div>
</div>
<div class="small" style="margin-top: 4px; color: #DD9D34;">
  Conecta tu wallet a este servidor para contribuir a la descentralización de Zcash.
</div>

<!-- LINKS -->
<div class="grid-2">
  <div>
    <div class="link-label">API PUBLICA</div>
    <div class="link-block"><a href="https://carover0.xyz/zec/status.json" target="_blank">carover0.xyz/zec/status.json</a></div>
  </div>
  <div>
    <div class="link-label">EXPLORADORES</div>
    <div class="link-block"><a href="https://t.me/zcashexplorer_bot" target="_blank">@zcashexplorer_bot</a></div>
        <div class="link-block"><a href="https://carover0.github.io/pagina/explorer-zec.html" target="_blank">carover0.github.io/explorer-zec</a></div>
  </div>
</div>
<!-- FOOTER -->
<div class="footer">
  ════════════════════════════════════════════════════════════════════════════════<br>
  © 2025 Creada con ♥ por cΔrovΣr0 · apoya: t1NxVLsRg4kNqMHE2bqmFL5Qizr2JDtmumU 
</div>

</div>

<script>
const NODE_JSON_URL = "https://carover0.xyz/zec/status.json";
const COINGECKO_API = "https://api.coingecko.com/api/v3/coins/zcash?localization=false&market_data=true";

function formatUptime(seconds) {
  seconds = parseInt(seconds);
  const days = Math.floor(seconds / (60 * 60 * 24));
  seconds %= (60 * 60 * 24);
  const hours = Math.floor(seconds / (60 * 60));
  seconds %= (60 * 60);
  const minutes = Math.floor(seconds / 60);
  return `${days}d ${hours}h ${minutes}min`;
}

function formatHash(hash) {
  if (!hash) return 'N/A';
  return hash.substring(0, 16) + '...' + hash.substring(hash.length - 4);
}

function formatDifficulty(diff) {
  return Number(diff).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ",");
}

function displayNodeData(data) {
  const uptimeSec = data.node?.uptime_seconds || 0;
  const isSynced = data.health?.synced ? "SYNCED" : "SYNCING";
  const syncClass = data.health?.synced ? "positive" : "negative";
  const connections = data.network?.connections || 0;
  const inbound = data.network?.inbound || 0;
  const outbound = data.network?.outbound || 0;
  const version = data.versions?.lightwalletd || 'N/A';
  const datetime = data.datetime || '';
  const timePart = datetime.split(' ')[1] || '';
  const blockHeight = data.chain?.height || 0;
  const mempoolSize = data.mempool?.size || 0;
  const difficulty = data.chain?.difficulty || 0;
  const blockReward = data.mining?.block_reward || 0;
  const chainName = data.chain?.name || 'main';
  const bestBlock = data.chain?.best_block || '';
  const sapling = data.chain?.sapling_activation || 419200;
  
  document.getElementById('node-version').innerText = `Zebra ${data.versions?.zcashd || 'N/A'}`;
  document.getElementById('node-state').innerText = isSynced;
  document.getElementById('node-state').className = `value ${syncClass}`;
  document.getElementById('node-blocks').innerText = Number(blockHeight).toLocaleString();
  document.getElementById('node-connections').innerText = `${connections} (${inbound} IN · ${outbound} OUT)`;
  document.getElementById('node-mempool').innerText = `${mempoolSize} TX`;
  document.getElementById('node-uptime').innerText = formatUptime(uptimeSec);
  document.getElementById('node-difficulty').innerText = formatDifficulty(difficulty);
  document.getElementById('node-hashrate').innerText = `${blockReward} ZEC`;
  document.getElementById('node-chain').innerText = chainName;
  document.getElementById('node-bestblock').innerText = formatHash(bestBlock);
  document.getElementById('node-timestamp').innerText = `bloque ${sapling}`;
}

async function fetchMarketData() {
  try {
    const res = await fetch(COINGECKO_API);
    const d = await res.json();
    const price = d.market_data.current_price.usd;
    const change24 = d.market_data.price_change_percentage_24h;
    const change7d = d.market_data.price_change_percentage_7d;
    const marketCap = d.market_data.market_cap.usd;
    const volume24 = d.market_data.total_volume.usd;

    const change24Cls = change24 >= 0 ? "positive" : "negative";
    const change7dCls = change7d >= 0 ? "positive" : "negative";
    const change24Sign = change24 >= 0 ? "+" : "";
    const change7dSign = change7d >= 0 ? "+" : "";

    document.getElementById("market-content").innerHTML = `
      <div class="row"><span class="label">PRECIO USD</span><span class="value">$${price.toFixed(2)}</span></div>
      <div class="row"><span class="label">24h %</span><span class="value ${change24Cls}">${change24Sign}${change24.toFixed(2)}%</span></div>
      <div class="row"><span class="label">7d %</span><span class="value ${change7dCls}">${change7dSign}${change7d.toFixed(2)}%</span></div>
      <div class="row"><span class="label">MARKET CAP</span><span class="value">$${(marketCap/1e6).toFixed(2)}M</span></div>
      <div class="row"><span class="label">VOLUMEN 24h</span><span class="value">$${(volume24/1e6).toFixed(2)}M</span></div>
    `;
    document.getElementById("market-updated").innerHTML = `actualizado: ${new Date().toLocaleTimeString()}`;
  } catch(err) {
    document.getElementById("market-content").innerHTML = '<div><span class="label negative">ERROR DE MERCADO</span></div>';
  }
}

window.handleNodeData = function(wrapper) {
  try {
    const jsonData = JSON.parse(wrapper.contents);
    displayNodeData(jsonData);
  } catch(err) {
    console.error(err);
  }
};

function fetchNodeData() {
  const oldScript = document.getElementById('jsonp-script');
  if (oldScript) oldScript.remove();

  const script = document.createElement('script');
  script.id = 'jsonp-script';
  script.src = "https://whateverorigin.org/get?callback=handleNodeData&url=" + 
               encodeURIComponent(NODE_JSON_URL) + 
               "&_=" + Date.now();
  
  script.onerror = () => {
    console.error("Error de conexion");
  };
  
  document.body.appendChild(script);
}

// Datos de ejemplo mientras carga
displayNodeData({
  node: { uptime_seconds: 4077418 },
  health: { synced: true },
  network: { connections: 8, inbound: 3, outbound: 5, subversion: "/Zebra:4.1.0/" },
  mempool: { size: 0 },
  chain: { 
    height: 3251436, 
    difficulty: 128282526.03243496,
    name: "main",
    best_block: "0000000000e0b0fcd5e4f57f80f17079c75d99b5804c2fe7d881b89534403e49",
    sapling_activation: 419200
  },
  mining: { block_reward: 3.125 },
  versions: { lightwalletd: "v0.4.18" },
  timestamp: 1771929997,
  datetime: "2026-02-24 10:46:37 UTC"
});

fetchNodeData();
fetchMarketData();
setInterval(fetchNodeData, 60000);
setInterval(fetchMarketData, 60000);
</script>

</body>
</html>
