<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Consola ZEC</title>
<style>
body {
    background: black;
    color: #00ff00;
    font-family: "Lucida Console", "Consolas", monospace;
    padding: 20px;
    white-space: pre;
    font-size: 16px;
}
</style>
</head>
<body>
<h1>Consola ZEC</h1>
<div id="output">Cargando...</div>

<script>
async function fetchZEC() {
    const output = document.getElementById("output");
    try {
        // Llamamos al endpoint serverless que ya filtra tu nodo
        const res = await fetch("/api/zec");
        const data = await res.json();

        if (data.error) {
            output.textContent = "Error: " + data.error;
            return;
        }

        output.textContent = `
Nodo: ${data.hostname}:${data.port}
Estado: ${data.online ? "ONLINE ✅" : "OFFLINE ❌"}
Ping: ${data.ping} ms
Altura de bloque: ${data.height}
Uptime 30d: ${(data.uptime_30d*100).toFixed(2)}%
Lightwallet: ${data.lightwallet_server_version}
Nodo: ${data.node_version}
Donaciones: ${data.donation_address}
        `;
    } catch (err) {
        output.textContent = "Error: Failed to fetch";
    }
}

// Carga inicial y refresco cada 10 segundos
fetchZEC();
setInterval(fetchZEC, 10000);
</script>
</body>
</html>
